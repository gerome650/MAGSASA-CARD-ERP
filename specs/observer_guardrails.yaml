# Generated by Cursor Governance System
# Purpose: Defines runtime, compliance, and ethical guardrails for the MCP Observer
# Integration: Tied to Render.com and GitHub Governance workflows
# Charter Ref: See specs/mcp-architecture.md (Observer Charter section)
# Version: 1.0.0

observer_guardrails:
  metadata:
    author: "AgSense Governance Automation"
    version: "1.0.0"
    last_updated: "2025-10-09"
    linked_charter: "/specs/mcp-architecture.md"
    environment: "production"

  runtime_constraints:
    latency_ms:
      max: 2500
      warning_threshold: 2000
    uptime_percent:
      target: 99.5
      min: 98.0
    memory_usage_mb:
      max: 1024
    cpu_usage_percent:
      max: 75
    api_call_rate_limit_per_min:
      max: 200
    observer_response_time_ms:
      max: 500

  governance_compliance:
    requires_spec_reference: true
    pr_template_enforced: true
    governance_checks_active: true
    render_deployment_auto_verify: true
    data_integrity_required: true

  security_and_privacy:
    secrets_scanning_enabled: true
    pii_detection_enabled: true
    audit_trail_retention_days: 180
    access_policy:
      - "deny if source == unknown"
      - "allow if signed_by == AgSense Governance Key"
    anomaly_alerts:
      email: "governance-alerts@agsense.ai"
      slack_channel: "#governance-alerts"

  factual_and_spec_drift:
    enabled: true
    drift_detection_interval_hours: 12
    max_allowed_drift_percent: 3
    actions_on_drift:
      - "alert_observer"
      - "revalidate_with_spec"
      - "pause_auto-deploy"

  coverage_and_testing:
    min_coverage_percent: 85
    integration_tests_required: true
    observer_self_check_frequency_hours: 6
    missing_tests_alert: true

  observability_and_reporting:
    telemetry_stream: "observer-metrics"
    export_to_render_dashboard: true
    incident_webhook_url: "https://render.com/api/webhooks/observer-incident"
    daily_summary_report: true
    weekly_audit_digest: true

  escalation_protocol:
    level_1: "Notify DevOps (auto Slack + email)"
    level_2: "Pause affected MCP pod"
    level_3: "Trigger Render rollback"
    level_4: "Escalate to AgSense Governance Council"

